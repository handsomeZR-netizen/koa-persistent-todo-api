# Todo List API

![Build Status](https://github.com/YOUR_USERNAME/todo-list-api/actions/workflows/ci.yml/badge.svg)
![Coverage](https://img.shields.io/badge/coverage-90%25-brightgreen)
![Node.js](https://img.shields.io/badge/node-%3E%3D18.0.0-green)
![License](https://img.shields.io/badge/license-ISC-blue)

> åŸºäº Koa æ¡†æ¶çš„æŒä¹…åŒ– Todo List RESTful API æœåŠ¡ï¼Œæ”¯æŒå®Œæ•´çš„ CRUD æ“ä½œã€‚

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client                                â”‚
â”‚                    (Postman/Browser)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ HTTP Request
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      app.js                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Koa Application                         â”‚    â”‚
â”‚  â”‚  â€¢ Error Handler Middleware                          â”‚    â”‚
â”‚  â”‚  â€¢ Body Parser Middleware                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     routes.js                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Koa Router                              â”‚    â”‚
â”‚  â”‚  â€¢ GET    /api/todos      â†’ è·å–æ‰€æœ‰ä»»åŠ¡             â”‚    â”‚
â”‚  â”‚  â€¢ POST   /api/todos      â†’ åˆ›å»ºæ–°ä»»åŠ¡               â”‚    â”‚
â”‚  â”‚  â€¢ POST   /api/todos/:id  â†’ æ›´æ–°ä»»åŠ¡                 â”‚    â”‚
â”‚  â”‚  â€¢ DELETE /api/todos/:id  â†’ åˆ é™¤ä»»åŠ¡                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    storage.js                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           Storage Layer                              â”‚    â”‚
â”‚  â”‚  â€¢ loadTodos()  â†’ è¯»å– JSON æ–‡ä»¶                     â”‚    â”‚
â”‚  â”‚  â€¢ saveTodos()  â†’ å†™å…¥ JSON æ–‡ä»¶                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    todos.json                                â”‚
â”‚                  (File System)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ä½¿ç”¨æˆªå›¾

<img src="C:\Users\86151\Desktop\2048\bytedance4\img\å±å¹•æˆªå›¾ 2025-12-02 134923.png" alt="å±å¹•æˆªå›¾ 2025-12-02 134923" style="zoom: 50%;" />

<img src="C:\Users\86151\Desktop\2048\bytedance4\img\å±å¹•æˆªå›¾ 2025-12-02 135003.png" alt="å±å¹•æˆªå›¾ 2025-12-02 135003" style="zoom: 33%;" />

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js >= 18.0.0
- npm >= 8.0.0

### å®‰è£…ä¾èµ–
```bash
npm install
```

### å¯åŠ¨æœåŠ¡
```bash
# ç”Ÿäº§æ¨¡å¼
npm start

# å¼€å‘æ¨¡å¼ (çƒ­é‡è½½)
npm run dev
```

æœåŠ¡é»˜è®¤è¿è¡Œåœ¨ `http://localhost:3000`

### Docker éƒ¨ç½²
```bash
# æ„å»ºé•œåƒ
docker build -t todo-api .

# è¿è¡Œå®¹å™¨
docker run -p 3000:3000 todo-api
```

## ğŸ“– API æ–‡æ¡£

### äº¤äº’å¼æ–‡æ¡£
å¯åŠ¨æœåŠ¡åè®¿é—® `/swagger` æŸ¥çœ‹ Swagger UI äº¤äº’å¼æ–‡æ¡£ã€‚

### API æ¥å£åˆ—è¡¨

| Method | URL | Description | Request Body | Response |
|--------|-----|-------------|--------------|----------|
| `GET` | `/api/todos` | è·å–æ‰€æœ‰ä»»åŠ¡ | - | `Todo[]` |
| `POST` | `/api/todos` | åˆ›å»ºæ–°ä»»åŠ¡ | `{ title: string, completed?: boolean }` | `Todo` |
| `POST` | `/api/todos/:id` | æ›´æ–°ä»»åŠ¡ | `{ title?: string, completed?: boolean }` | `Todo` |
| `DELETE` | `/api/todos/:id` | åˆ é™¤ä»»åŠ¡ | - | `204 No Content` |

### æ•°æ®æ¨¡å‹

#### Todo å¯¹è±¡
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "title": "å­¦ä¹  Koa æ¡†æ¶",
  "completed": false,
  "createdAt": "2025-12-02T10:30:00.000Z"
}
```

### è¯·æ±‚/å“åº”ç¤ºä¾‹

#### åˆ›å»ºä»»åŠ¡
```bash
curl -X POST http://localhost:3000/api/todos \
  -H "Content-Type: application/json" \
  -d '{"title": "å®Œæˆä½œä¸š", "completed": false}'
```

å“åº” `201 Created`:
```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "title": "å®Œæˆä½œä¸š",
  "completed": false,
  "createdAt": "2025-12-02T10:30:00.000Z"
}
```

#### é”™è¯¯å“åº”
```json
{
  "error": {
    "message": "title å­—æ®µæ˜¯å¿…éœ€çš„ä¸”å¿…é¡»æ˜¯éç©ºå­—ç¬¦ä¸²",
    "code": "INVALID_TITLE"
  }
}
```

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
npm test

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:cov

# ä»£ç æ£€æŸ¥
npm run lint
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
todo-list-api/
â”œâ”€â”€ app.js              # åº”ç”¨å…¥å£ï¼ŒKoa å®ä¾‹é…ç½®
â”œâ”€â”€ routes.js           # API è·¯ç”±å®šä¹‰
â”œâ”€â”€ storage.js          # æ•°æ®æŒä¹…åŒ–å±‚
â”œâ”€â”€ todos.json          # æ•°æ®å­˜å‚¨æ–‡ä»¶
â”œâ”€â”€ package.json        # é¡¹ç›®é…ç½®
â”œâ”€â”€ Dockerfile          # Docker é…ç½®
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ ci.yml      # GitHub Actions CI é…ç½®
â””â”€â”€ tests/
    â”œâ”€â”€ routes.test.js  # è·¯ç”±æµ‹è¯•
    â””â”€â”€ storage.test.js # å­˜å‚¨å±‚æµ‹è¯•
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Koa 2.x
- **è·¯ç”±**: koa-router
- **æµ‹è¯•**: Jest + Supertest + fast-check (å±æ€§æµ‹è¯•)
- **æ–‡æ¡£**: Swagger UI
- **å®¹å™¨åŒ–**: Docker

## ğŸ“ License

ISC
